(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},46:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setBoardMinesData",function(){return A}),a.d(n,"getBoardMinesData",function(){return M}),a.d(n,"toggleLoading",function(){return R}),a.d(n,"setLevel",function(){return T}),a.d(n,"gameover",function(){return G}),a.d(n,"resetGame",function(){return I}),a.d(n,"clear",function(){return L});var r=a(0),c=a.n(r),o=a(19),i=a.n(o),l=a(8),s=a(9),u=a(11),m=a(10),p=a(12),d=a(13),b=a(4),h={beginner:{boardWidth:9,boardHeight:9,bombNum:10},advantage:{boardWidth:16,boardHeight:16,bombNum:40},cellSize:40,api_url:"https://tiki-minesweeper.herokuapp.com"},v=h.cellSize,f={width:32,height:32,border:"outset 4px white",lineHeight:"32px",userSelect:"none"},g={width:38,height:38,lineHeight:"38px",border:"solid 1px darkgray"},E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))))._handleClick=function(e){e.preventDefault(),a.props.onClick(a.props.x,a.props.y)},a._handleRightClick=function(e){e.preventDefault(),a.props.onRightClick(a.props.x,a.props.y)},a.setStyle=function(e,t){switch(t){case 1:e=Object(b.a)({},e,{color:"blue"});break;case 2:e=Object(b.a)({},e,{color:"green"});break;case 3:e=Object(b.a)({},e,{color:"red"});break;case 4:e=Object(b.a)({},e,{color:"navy"});break;case 5:e=Object(b.a)({},e,{color:"darkred"});break;case 6:e=Object(b.a)({},e,{color:"deepskyblue"});break;case 7:e=Object(b.a)({},e,{color:"navy"});break;case 8:e=Object(b.a)({},e,{color:"gray"})}return e},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.cell,t=e.flagged?c.a.createElement("i",{className:"fa fa-flag"}):"",a=Object(b.a)({},f,{width:v-2,height:v-2,lineHeight:"".concat(v-8,"px")});return e.open&&(a=Object(b.a)({},a,g,{width:v-2,height:v-2,lineHeight:"".concat(v-2,"px")}),e.bomb?(t=c.a.createElement("i",{className:"fa fa-bomb",style:{marginTop:-3}}),a=Object(b.a)({},a,{backgroundColor:"red"})):e.bombCount>0?(t=e.bombCount,a=this.setStyle(a,t)):t=""),c.a.createElement("div",{className:"cell",style:a,onClick:this._handleClick,onContextMenu:this._handleRightClick},t)}}]),t}(r.Component),O=h.cellSize,y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderCells",value:function(e,t){var a=this,n=[];return t.forEach(function(t,r){n.push(c.a.createElement(E,{key:r,cell:t,x:e,y:r,onClick:a.props.onClick,onRightClick:a.props.onRightClick}))}),n}},{key:"renderBoard",value:function(){var e=this,t=[];return this.props.board.forEach(function(a,n){t.push(c.a.createElement("div",{key:n,className:"row"},e.renderCells(n,a)))}),t}},{key:"render",value:function(){return c.a.createElement("div",{className:"container text-center",style:{width:"".concat(this.props.size*O,"px")}},this.renderBoard())}}]),t}(r.Component),j=a(6),k="TOGGLE_LOADING",w="GAMEOVER",C="CLEAR",N="RESET_GAME",x="SET_LEVEL",_="GET_MINE_DATA",S="SET_MINE_DATA",A=function(e){return{type:S,payload:Object(b.a)({},e)}},M=function(e){return{type:_,payload:Object(b.a)({},e)}},R=function(e){return{type:k,payload:Object(b.a)({},e)}},T=function(e){return{type:x,payload:Object(b.a)({},e)}},G=function(){return{type:w}},I=function(){return{type:N}},L=function(){return{type:C}},B=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.content,r=t.win,o=t.callbackReset;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#modal",style:{display:"none"},id:"openModal"},"Launch"),c.a.createElement("div",{className:"modal fade",id:"modal",tabIndex:"-1",role:"dialog"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h5",{className:"modal-title"},a),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),c.a.createElement("div",{className:"modal-body"},"You ",!0===r?"win ":"lose "," the game in"," ",c.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}})),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){o(),e.props.appActions.resetGame()}},"New game"),c.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:function(){return e.props.appActions.clear()}},"Return to Home"))))))}}]),t}(r.Component),D=Object(d.b)(function(e){return{app:e,gameover:e.gameover}},function(e){return{appActions:Object(j.b)(n,e)}})(B),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).fetchMines=function(){var e=a.props.level,t=h[e],n=t.bombNum,r=t.boardWidth;a.props.appActions.getBoardMinesData({size:r,mines:n}),clearInterval(window.timer),a.setState({timer:!1,timeSecond:0}),window.openCount=0},a._initBoard=function(e,t){var a=h[e],n=a.boardWidth,r=a.boardHeight,c=Array.from(new Array(n),function(){return new Array(r).fill({bomb:!1,bombCount:0,open:!1,flagged:!1})}),o=!0,i=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var m=s.value;c[m.x][m.y]=Object.assign({},c[m.x][m.y],{bomb:!0})}}catch(p){i=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}return c},a.handleClickCell=function(e,t){a.state.timer||(a.setState({timer:!0}),a.startTime()),a.props.gameover||a._open(e,t)},a.handleRightClickCell=function(e,t){a.props.gameover||a._toggleFlag(e,t)},a._checkwin=function(){for(var e=a.state.data,t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var r=e[t][n];if(!r.open&&!r.bomb)return!1}return!0},a._endGame=function(e){a.props.appActions.gameover(),!e&&a._openAllMines(),a.setState({win:e,content:document.getElementById("timer").innerHTML}),clearInterval(window.timer),setTimeout(function(){document.getElementById("openModal").click()},1e3)},a._openAllMines=function(){a.props.app.mines.forEach(function(e){a._open(e.x,e.y)})},a.formatTime=function(e){var t,a,n;function r(e){var t=e+"";return t.length<2?"0"+t:t}return n=r(parseInt(e/3600)),a=r(parseInt((e-3600*n)/60)),t=r(e%60),"".concat(n,":").concat(a,":").concat(t)},a.state={data:[],timer:!1,win:null,content:"",timeSecond:0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchMines()}},{key:"componentWillReceiveProps",value:function(e){var t=this._initBoard(e.level,e.app.mines);e.app.gameover||this.setState({data:t})}},{key:"_open",value:function(e,t){var a=[].concat(this.state.data),n=h[this.props.level],r=n.boardWidth,c=n.boardHeight;if(!a[e][t].open){window.openCount++;for(var o=0,i=e-1;i<=e+1;i++)for(var l=t-1;l<=t+1;l++)i<0||i>=r||l<0||l>=c||i===e&&l===t||a[i][l].bomb&&o++;if(a[e][t]=Object.assign({},a[e][t],{open:!0,bombCount:o}),this.setState({data:a}),a[e][t].flagged&&this._toggleFlag(e,t),a[e][t].bomb&&this._endGame(!1),c*r-this.props.app.mines.length==window.openCount&&this._checkwin()&&this._endGame(!0),0===o&&!a[e][t].bomb)for(var s=e-1;s<=e+1;s++)for(var u=t-1;u<=t+1;u++)s<0||s>=r||u<0||u>=c||s===e&&u===t||a[s][u].flagged||this._open(s,u)}}},{key:"_toggleFlag",value:function(e,t){var a=[].concat(this.state.data),n=a[e][t].flagged;a[e][t]=Object.assign({},a[e][t],{flagged:!n}),this.setState({data:a})}},{key:"startTime",value:function(){var e=this;window.timer=setInterval(function(){e.setState({timeSecond:e.state.timeSecond+1})},1e3)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.content,r=void 0===n?"":n,o=t.win,i=t.timeSecond,l=void 0===i?0:i,s=this.props.loading;return c.a.createElement("div",{className:"container text-center"},c.a.createElement(D,{title:"Game over",content:r,win:o,callbackReset:this.fetchMines}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 text-center"},c.a.createElement("img",{width:"300",src:"https://brentvale.github.io/ReactMinesweeper/images/minesweeper_text.png"}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("span",{id:"timer"},this.formatTime(l)))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 text-center"},c.a.createElement("button",{onClick:function(){return e.props.appActions.clear()},className:"button"},"To home"),c.a.createElement("button",{onClick:function(){e.props.appActions.resetGame(),e.fetchMines()},className:"mx-2 button"},"New game"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 text-center"},s?c.a.createElement("img",{src:"/images/ripple.svg"}):c.a.createElement(y,{board:a,onClick:this.handleClickCell,size:h[this.props.level].boardWidth,onRightClick:this.handleRightClickCell}))),c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement("b",{className:"text-center text-danger"},"Guide"),c.a.createElement("br",null),c.a.createElement("span",{style:{fontSize:14}},"Click: Open a cell."),c.a.createElement("br",null),c.a.createElement("span",{style:{fontSize:14}},"Right Click: Toggle a flag."))))}}]),t}(r.Component),z=Object(d.b)(function(e){return{app:e,gameover:e.gameover,loading:e.loading}},function(e){return{appActions:Object(j.b)(n,e)}})(H),W=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 text-center"},c.a.createElement("img",{width:"500",src:"https://brentvale.github.io/ReactMinesweeper/images/minesweeper_text.png"}))),c.a.createElement("div",{className:"row text-center mb-2"},c.a.createElement("div",{className:"col text-center"},"Welcome to game"," ",c.a.createElement("a",{href:"https://vi.wikipedia.org/wiki/D%C3%B2_m%C3%ACn_(tr%C3%B2_ch%C6%A1i)",target:"_blank"},"Minesweeper."),c.a.createElement("br",null),"Let choose the level, and play the game")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 text-center"},c.a.createElement("button",{onClick:function(){return e.props.appActions.setLevel({level:"beginner"})},className:"button"},"Beginner"),c.a.createElement("button",{onClick:function(){return e.props.appActions.setLevel({level:"advantage"})},className:"mx-2 button"},"Advantage"))))}}]),t}(r.Component),F=Object(d.b)(null,function(e){return{appActions:Object(j.b)(n,e)}})(W),P=(a(46),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={start:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.app.level!=e.app.level&&this.setState({start:!this.state.start})}},{key:"render",value:function(){var e=this.state.start,t=this.props.app.level;return e?c.a.createElement(z,{level:t}):c.a.createElement(F,null)}}]),t}(r.Component)),V=Object(d.b)(function(e){return{app:e}})(P),J=a(17),X=a.n(J),U=a(14),Y=a(34),q=a.n(Y),K=X.a.mark(Z),Q=X.a.mark($);function Z(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.f)(_,$);case 2:case"end":return e.stop()}},K)}function $(e){var t,a;return X.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(U.e)(R());case 3:return n.next=5,Object(U.b)(ee,e.payload);case 5:return t=n.sent,a=t.data,n.next=9,Object(U.e)(A({mines:a.data}));case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:return n.prev=14,n.next=17,Object(U.c)(1e3);case 17:return n.next=19,Object(U.e)(R());case 19:return n.finish(14);case 20:case"end":return n.stop()}},Q,null,[[0,11,14,20]])}var ee=function(e){var t=e.size,a=e.mines;return function(e,t,a){var n={method:t,url:h.api_url+e,data:a,timeout:12e4};return q()(n).catch(function(e){console.log("[err when call axios]"),console.log(e)})}("/getMines?size=".concat(t,"&mines=").concat(a),"GET",e)},te=X.a.mark(ae);function ae(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)([Object(U.d)(Z)]);case 2:case"end":return e.stop()}},te)}var ne={level:"",mines:[],loading:!1,gameover:!1};var re=a(35),ce=Object(re.a)(),oe=[ce],ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.c,le=Object(j.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(b.a)({},e,{mines:t.payload.mines});case k:return Object(b.a)({},e,{loading:!e.loading});case x:return Object(b.a)({},e,{level:t.payload.level});case w:return Object(b.a)({},e,{gameover:!0});case N:return Object(b.a)({},e,{gameover:!1});case C:return Object(b.a)({},ne);default:return e}},ie(j.a.apply(void 0,oe)));ce.run(ae),i.a.render(c.a.createElement(d.a,{store:le},c.a.createElement(V,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c3b25741.chunk.js.map